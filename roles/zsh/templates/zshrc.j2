# ---------- åŸºæœ¬è¨­å®š ----------
#PATH
export PATH=$PATH:~/Library/Android/sdk/platform-tools

# Homebrew ã‚ªãƒ—ã‚·ãƒ§ãƒ³
export HOMEBREW_CASK_OPTS='--appdir=/Applications'

# æ—¥æœ¬èªã‚’ä½¿ç”¨
export LANG=ja_JP.UTF-8

# æ—¥æœ¬èªãƒ•ã‚¡ã‚¤ãƒ«åã‚’è¡¨ç¤ºå¯èƒ½ã«ã™ã‚‹
setopt print_eight_bit

# vim ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰ã‚’ä½¿ç”¨
bindkey -v

# è‰²ã‚’ä½¿ç”¨
autoload -Uz colors
colors

# git ã®æƒ…å ±ã‚’å–å¾—
autoload -Uz vcs_info

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªç§»å‹•æ™‚ã«å†åº¦æƒ…å ±å–å¾—
setopt prompt_subst

# ---------- ãƒ’ã‚¹ãƒˆãƒªãƒ¼é–¢é€£ ----------
HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000

# ãƒ’ã‚¹ãƒˆãƒªãƒ¼ã«é‡è¤‡ã‚’è¡¨ç¤ºã—ãªã„
setopt hist_ignore_all_dups

# ã‚¹ãƒšãƒ¼ã‚¹ã‹ã‚‰å§‹ã¾ã‚‹ã‚³ãƒãƒ³ãƒ‰è¡Œã¯ãƒ’ã‚¹ãƒˆãƒªã«æ®‹ã•ãªã„
setopt hist_ignore_space

# ãƒ’ã‚¹ãƒˆãƒªã«ä¿å­˜ã™ã‚‹ã¨ãã«ä½™åˆ†ãªã‚¹ãƒšãƒ¼ã‚¹ã‚’å‰Šé™¤ã™ã‚‹
setopt hist_reduce_blanks

# ã‚·ã‚§ãƒ«ã‚’æ¨ªæ–­ã—ã¦.zshhistoryã«è¨˜éŒ²
setopt inc_append_history

# ãƒ’ã‚¹ãƒˆãƒªã‚’å…±æœ‰
setopt share_history

# ãƒ’ã‚¹ãƒˆãƒªç”¨ã‚­ãƒ¼ãƒã‚¤ãƒ³ãƒ‰
autoload history-search-end
zle -N history-beginning-search-backward-end history-search-end
zle -N history-beginning-search-forward-end history-search-end
bindkey '^P' history-beginning-search-backward-end
bindkey '^N' history-beginning-search-forward-end
bindkey '^R' history-incremental-search-backward

# -------------------------------------------------

# ---------- alias ---------
alias la='ls -la'
alias ls='ls -l'
alias lat='pwd;find . | sort | sed '\''1d;s/^\.//;s/\/\([^/]*\)$/|--\1/;s/\/[^/|]*/| /g'\'''

alias rm='rm -i'
alias cp='cp -i'
alias mv='mv -i'


# ---------- git ----------
alias gst='git status'
alias gd='git diff'

alias glog='git log --graph --date=short --decorate=short --pretty=format:'\''%Cgreen%h %Creset%cd %Cblue%cn %Cred%d %Creset%s'\'''

alias gb='git branch'
alias gbd='git branch -d'

alias grp='git remote prune'

alias gco='git checkout'
alias gcob='git checkout -b'

alias ga='git add'
alias gc='git commit --verbose'
alias gps='git push'

alias grst='git reset'

alias gconf='git config -l'


# ---------- npm ----------
alias npm-remove='npm ls -gp --depth=0 | awk -F/ \''/node_modules/ && !/\/npm$/ {print $NF}\'' | xargs npm -g rm'
alias sudo-npm-remove='sudo npm ls -gp --depth=0 | awk -F/ \''/node_modules/ && !/\/npm$/ {print $NF}\'' | sudo xargs npm -g rm'

# -------------------------------------------------

# ---------- auto-comp ---------
# è£œå®Œ
autoload -U compinit
compinit

# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªåã®è£œå®Œã§æœ«å°¾ã® / ã‚’è‡ªå‹•çš„ã«ä»˜åŠ ã—ã€æ¬¡ã®è£œå®Œã«å‚™ãˆã‚‹
setopt auto_param_slash

# è£œå®Œå€™è£œä¸€è¦§ã§ãƒ•ã‚¡ã‚¤ãƒ«ã®ç¨®åˆ¥ã‚’è­˜åˆ¥ãƒãƒ¼ã‚¯è¡¨ç¤º (è¨³æ³¨:ls -F ã®è¨˜å·)
setopt list_types

# ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³ã®å¼•æ•°ã§ --prefix=/usr ãªã©ã® = ä»¥é™ã§ã‚‚è£œå®Œã§ãã‚‹
setopt magic_equal_subst

# æ—¥æœ¬èªãƒ•ã‚¡ã‚¤ãƒ«åç­‰8ãƒ“ãƒƒãƒˆã‚’é€šã™
setopt print_eight_bit
#
# æ˜ç¢ºãªãƒ‰ãƒƒãƒˆã®æŒ‡å®šãªã—ã§.ã‹ã‚‰å§‹ã¾ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒãƒƒãƒ
setopt globdots

# è£œå®Œå€™è£œã‚’ â†â†“â†‘â†’ ã§ã‚‚é¸æŠå‡ºæ¥ã‚‹ã‚ˆã†ã«ã™ã‚‹
zstyle ':completion:*:default' menu select=1

# -------------------------------------------------

# ---------- theme ---------
# ---------- æ–‡å­—è‰² ----------
local COLOR_FG_LIGHTBLUE='%{[38;5;081m%}'
local COLOR_FG_BLUE='%{[38;5;033m%}'
local COLOR_FG_DEEPGREEN='%{[38;5;034m%}'
local COLOR_FG_GREEN='%{[38;5;082m%}'
local COLOR_FG_ORANGE='%{[38;5;214m%}'
local COLOR_FG_PINK='%{[38;5;200m%}'
local COLOR_FG_RED='%{[38;5;196m%}'

# ---------- èƒŒæ™¯è‰² ----------
local COLOR_BG_GREEN='%{[30;48;5;082m%}'
local COLOR_END='%{[0m%}'

function box_name {
    [ -f ~/.box-name ] && cat ~/.box-name || echo ${SHORT_HOST:-$HOST}
}

zstyle ':vcs_info:*' formats '%s : %r-[%b] - %m'
zstyle ':vcs_info:*' actionformats '%s : %r-[%b|%a] - %m'
precmd () {
    psvar=()
    LANG=en_US.UTF-8
    vcs_info
    [[ -n "$vcs_info_msg_0_" ]] && psvar[1]="$vcs_info_msg_0_"
}

zstyle ':vcs_info:git+set-message:*' hooks git-config-user
function +vi-git-config-user(){
  user=`git config user.name`
  email=`git config user.email`
  hook_com[misc]+=$user($email)
}

PROMPT='â•­â”€${COLOR_FG_GREEN}%n${COLOR_END} at ${COLOR_FG_ORANGE}$(box_name)${COLOR_END} in %B${COLOR_FG_PINK}%d${COLOR_END}%b
| %1(v|${COLOR_FG_LIGHTBLUE}%1v${COLOR_END}|)
â•°â”€ '
